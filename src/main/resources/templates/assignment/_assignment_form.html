<!--
  ~ Elaastic - formative assessment system
  ~ Copyright (C) 2019. University Toulouse 1 Capitole, University Toulouse 3 Paul Sabatier
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<div th:fragment="assignmentForm(assignment)"
     th:remove="tag"
     xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">

  <div class="ui error message"></div>

  <div class="required field ob-assignment-creation-8" th:classappend="${#fields.hasErrors('title')}? 'error'">
    <label th:text="#{assignment.title.label}">
      Title
    </label>
    <input type="text"
           name="title"
           th:field="*{title}"
           autofocus="autofocus"/>

    <input type="hidden"
           name="subject"
           th:field="*{subject}"/>

    <input type="hidden"
           name="owner"
           th:field="*{owner}"/>
  </div>

  <div class="field ob-assignment-creation-9" th:classappend="${#fields.hasErrors('audience')}? 'error'">
    <label th:text="#{assignment.audience.label}">
      Audience
    </label>
    <input type="text"
           name="audience"
           th:field="*{audience}"/>
  </div>

  <div class="field ob-assignment-creation-10" th:classappend="${#fields.hasErrors('scholarYear')}? 'error'">
    <label th:text="#{assignment.scholarYear.label}">
      ScholarYear
    </label>
    <input type="text"
           name="scholarYear"
           th:field="*{scholarYear}"/>
  </div>

  <div class="field ob-assignment-creation-11" th:classappend="${#fields.hasErrors('description')}? 'error'">
    <label th:text="#{assignment.description.label}">
      Description
    </label>
    <input type="text"
           name="description"
           th:field="*{description}"/>
  </div>

  <div class="field">
    <label th:text="#{assignment.access}">Acc√®s au devoir</label>
    <div class="ui toggle checkbox">
      <label th:text="#{assignment.autorize.anonymous.sessions}">Autoriser les sessions anonymes ?</label>
      <input type="checkbox"
             name="acceptAnonymousUsers"
             th:field="*{acceptAnonymousUsers}"
             th:checked="${assignment.acceptAnonymousUsers}" />
    </div>
  </div>


  <script th:inline="javascript">
    $(document)
      .ready(function () {
        $('.ui.form')
          .form({
            fields: {
              title: {
                identifier: 'title',
                rules: [
                  {
                    type: 'empty',
                    prompt: /*[[#{assignment.title.mandatory}]]*/ ''
                  }
                ]
              },
              scholarYear: {
                identifier: 'scholarYear',
                rules: [
                  {
                    type: 'regExp',
                    value: '^$|([2][0-9]{3}[ ][-][ ][2][0-9]{3})',
                    prompt: /*[[#{assignment.scholarYear.mandatory}]]*/ ''
                  }
                ]
              }
            }
          })
      });

    $('.ui.checkbox').checkbox();
  </script>
</div>


